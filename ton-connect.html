<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Connect Wallet Telegram</title>
  <script src="https://unpkg.com/@tonconnect/sdk@latest/dist/tonconnect-sdk.min.js"></script>
</head>
<body style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:#0e0e0e;color:#fff;font-family:sans-serif;">
  <h1>üéß Insane Nights & Days</h1>
  <p>Connecte ton Wallet Telegram pour commencer</p>

  <button id="connectBtn" style="padding:12px 24px;font-size:16px;background:#28c1f5;border:none;border-radius:8px;cursor:pointer;color:#fff;">
    Connecter mon Wallet Telegram
  </button>

  <p id="status" style="margin-top:20px;font-size:14px;"></p>

  <script>
    const manifestUrl = "https://insanenightsanddays.netlify.app/tonconnect-manifest.json";

    const tonConnect = new TON_CONNECT.TonConnect({
      manifestUrl
    });

    document.getElementById("connectBtn").addEventListener("click", async () => {
      try {
        await tonConnect.connect({
          universalLink: "https://t.me/wallet/start",
          bridgeUrl: "https://bridge.tonapi.io/bridge"
        });

        const walletInfo = tonConnect.account;
        if (walletInfo?.address) {
          const address = walletInfo.address;
          document.getElementById("status").innerText = "‚úÖ Adresse connect√©e : " + address;

          // Envoi √† Telegram WebApp (si appel√© depuis Telegram)
          if (window.Telegram && Telegram.WebApp) {
            Telegram.WebApp.ready();
            Telegram.WebApp.sendData(address);
          }
        } else {
          document.getElementById("status").innerText = "‚ùå Aucune adresse r√©cup√©r√©e.";
        }
      } catch (error) {
        console.error("Erreur connexion wallet:", error);
        document.getElementById("status").innerText = "‚ùå Erreur de connexion au wallet.";
      }
    });
  </script>
</body>
</html>
